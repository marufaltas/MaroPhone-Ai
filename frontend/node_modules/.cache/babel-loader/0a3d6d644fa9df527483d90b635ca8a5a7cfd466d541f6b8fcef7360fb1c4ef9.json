{"ast":null,"code":"import _objectSpread from\"C:/Users/Pc/Desktop/kk/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AuthPopup(_ref){let{lang,onClose}=_ref;const[isLogin,setIsLogin]=useState(true);const[form,setForm]=useState({email:'',password:'',name:''});const[error,setError]=useState('');const[loading,setLoading]=useState(false);const handleChange=e=>setForm(f=>_objectSpread(_objectSpread({},f),{},{[e.target.name]:e.target.value}));const handleSubmit=async e=>{e.preventDefault();setError('');setLoading(true);try{const url=isLogin?'http://localhost:5000/api/login':'http://localhost:5000/api/signup';const res=await fetch(url,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(form)});const data=await res.json();if(!res.ok)throw new Error(data.error||'خطأ');onClose&&onClose(data);}catch(err){console.error(err);setError(err.message||'فشل الاتصال');}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"auth-toast\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"close-x\",onClick:()=>onClose&&onClose(null),children:\"\\u2715\"}),/*#__PURE__*/_jsx(\"h3\",{style:{marginTop:0},children:isLogin?'تسجيل الدخول':'إنشاء حساب'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[!isLogin&&/*#__PURE__*/_jsx(\"input\",{name:\"name\",placeholder:\"\\u0627\\u0644\\u0627\\u0633\\u0645\",value:form.name,onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{name:\"email\",placeholder:\"\\u0627\\u0644\\u0627\\u064A\\u0645\\u064A\\u0644\",value:form.email,onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{name:\"password\",type:\"password\",placeholder:\"\\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\",value:form.password,onChange:handleChange}),error&&/*#__PURE__*/_jsx(\"div\",{style:{color:'#ffb3b3',marginTop:8},children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn\",onClick:()=>onClose&&onClose(null),children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn primary\",children:loading?'جاري...':isLogin?'دخول':'تسجيل'})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:10,textAlign:'center'},children:/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>setIsLogin(s=>!s),children:isLogin?'إنشاء حساب جديد':'لديك حساب؟ تسجيل الدخول'})})]});}export default AuthPopup;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","AuthPopup","_ref","lang","onClose","isLogin","setIsLogin","form","setForm","email","password","name","error","setError","loading","setLoading","handleChange","e","f","_objectSpread","target","value","handleSubmit","preventDefault","url","res","fetch","method","headers","body","JSON","stringify","data","json","ok","Error","err","console","message","className","children","onClick","style","marginTop","onSubmit","placeholder","onChange","type","color","textAlign","s"],"sources":["C:/Users/Pc/Desktop/kk/frontend/src/components/AuthPopup.js"],"sourcesContent":["import React, { useState } from 'react';\r\n\r\nfunction AuthPopup({ lang, onClose }) {\r\n  const [isLogin, setIsLogin] = useState(true);\r\n  const [form, setForm] = useState({ email: '', password: '', name: '' });\r\n  const [error, setError] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleChange = e => setForm(f => ({ ...f, [e.target.name]: e.target.value }));\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError(''); setLoading(true);\r\n    try {\r\n      const url = isLogin ? 'http://localhost:5000/api/login' : 'http://localhost:5000/api/signup';\r\n      const res = await fetch(url, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(form) });\r\n      const data = await res.json();\r\n      if (!res.ok) throw new Error(data.error || 'خطأ');\r\n      onClose && onClose(data);\r\n    } catch (err) {\r\n      console.error(err);\r\n      setError(err.message || 'فشل الاتصال');\r\n    } finally { setLoading(false); }\r\n  };\r\n\r\n  return (\r\n    <div className=\"auth-toast\">\r\n      <button className=\"close-x\" onClick={() => onClose && onClose(null)}>✕</button>\r\n      <h3 style={{marginTop:0}}>{isLogin ? 'تسجيل الدخول' : 'إنشاء حساب'}</h3>\r\n      <form onSubmit={handleSubmit}>\r\n        {!isLogin && <input name=\"name\" placeholder=\"الاسم\" value={form.name} onChange={handleChange} />}\r\n        <input name=\"email\" placeholder=\"الايميل\" value={form.email} onChange={handleChange} />\r\n        <input name=\"password\" type=\"password\" placeholder=\"كلمة المرور\" value={form.password} onChange={handleChange} />\r\n        {error && <div style={{color:'#ffb3b3',marginTop:8}}>{error}</div>}\r\n        <div className=\"actions\">\r\n          <button type=\"button\" className=\"btn\" onClick={() => onClose && onClose(null)}>إلغاء</button>\r\n          <button type=\"submit\" className=\"btn primary\">{loading ? 'جاري...' : (isLogin ? 'دخول' : 'تسجيل')}</button>\r\n        </div>\r\n      </form>\r\n      <div style={{marginTop:10,textAlign:'center'}}>\r\n        <button className=\"btn\" onClick={() => setIsLogin(s => !s)}>{isLogin ? 'إنشاء حساب جديد' : 'لديك حساب؟ تسجيل الدخول'}</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AuthPopup;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}